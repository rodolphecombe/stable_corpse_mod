#textdomain wesnoth-stable-corpse-mod
[textdomain]
	name="wesnoth-stable-corpse-mod"
	path="data/add-ons/Stable_Corpse_Mod/translations"
[/textdomain]

#define SCM_ABOUT
[about]
	title= _ "Author of this mod"
	[entry]
		name= "Lhybrideur"
	[/entry]
[/about]
[about]
	title= _ "Flames"
	[entry]
		name= "A Song of the Wind campaign by revansurik"
	[/entry]
[/about]
#enddef

#define SCM_LUA
[lua]
	code = << wesnoth.dofile("~add-ons/Stable_Corpse_Mod/lua/submerge_tile_string.lua") >>
[/lua]
[lua]
	code = << wesnoth.dofile("~add-ons/Stable_Corpse_Mod/lua/multihex_image.lua") >>
[/lua]
#enddef

[binary_path]
	path=data/add-ons/Stable_Corpse_Mod/
[/binary_path]
{SCM_LUA}

[modification]
	id=Stable_Corspe_Mod
	name=_"Stable Corpse Mod"
	require_modification=no
	type=hybrid
	[options]
		[checkbox]
			id=blood
			name=_"Dead units bleed"
			description=_"Dead units will leave a pool of blood on the ground"
			default=no
		[/checkbox]
	[/options]
	[event]
		name=last breath
		first_time_only=no
		[filter]
			[not]
				type=Cuttle Fish, Fire Guardian, Fire Wraith, Giant Mudcrawler, Mudcrawler, Jinn, Tentacle of the Deep, Nightgaunt, Kraken, Ghost, Shadow, Spectre, Wraith, Fire Dragon
			[/not]
			[not]
				race=trueelemental,elemental,troll
			[/not]
			[filter_location]
				[not]
					terrain=W*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
				[/not]
				[or]
					terrain=*^B*
				[/or]
			[/filter_location]
		[/filter]
		[filter_second_attack]
			type=fire
		[/filter_second_attack]
		[item]
			x,y=$x1,$y1
			name=flames
			halo="flame-big-A[01~08].png:140"
		[/item]
	[/event]
	[event]
		name=die
		first_time_only=no
		[filter]
			[not]
				race=trueelemental,elemental
			[/not]
			[filter_location]
				[not]
					terrain=Wo*^*,*^Q*,Q*^*,Mv
				[/not]
				[or]
					terrain=*^B*
				[/or]
			[/filter_location]
		[/filter]
		[remove_item]
			x,y=$x1,$y1
			image=flames
		[/remove_item]
		[if]
			[not]
				[have_unit]
					x,y=$x2,$y2
					[has_attack]
						special_type_active=plague
					[/has_attack]
				[/have_unit]
				[not]
					[variable]
						name=unit.status.unplagueable
						equals=yes
					[/variable]
				[/not]
			[/not]
			[then]
				[if]
					[variable]
						name=second_weapon.type
						equals=fire
					[/variable]
					[not]
						[have_location]
							x,y=$x1,$y1
							terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
							[not]
								terrain=*^B*
							[/not]							
						[/have_location]
					[/not]
					[not]
						[variable]
							name=unit.type
							formula="value in ['Jinn', 'Tentacle of the Deep', 'Nightgaunt', 'Kraken', 'Ghost', 'Shadow', 'Spectre', 'Wraith', 'Cuttle Fish', 'Fire Guardian', 'Fire Wraith', 'Giant Mudcrawler', 'Mudcrawler','Fire Dragon']"
						[/variable]
					[/not]
					[not]
						[variable]
							name=unit.race
							equals=troll
						[/variable]
					[/not]
					[then]
						[switch]
							variable=unit.type
							[case]
								value=Ancient Wose, Wose Shaman, Elder Wose, Wose
								[if]
									{VARIABLE_CONDITIONAL unit.facing contains "w"}
									[then]
										{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
									[/then]
									[else]
										{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
									[/else]
								[/if]
							[/case]
							[else]
								[if]
									{VARIABLE_CONDITIONAL unit.facing contains "w"}
									[then]
										{PLACE_IMAGE "units/monsters/fireghost-death6.png~NO_TOD_SHIFT()~FL()" $x1 $y1}
									[/then]
									[else]
										{PLACE_IMAGE "units/monsters/fireghost-death6.png~NO_TOD_SHIFT()" $x1 $y1}
									[/else]
								[/if]
							[/else]
						[/switch]
					[/then]
					[else]
						[if]
							[variable]
								name=blood
								equals=yes
							[/variable]
							[not]
								[variable]
									name=second_weapon.type
									equals=cold
								[/variable]
							[/not]
							[not]
								[variable]
									name=second_weapon.type
									equals=arcane
								[/variable]
							[/not]
							[not]
								[have_location]
									x,y=$x1,$y1
									terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
									[not]
										terrain=*^B*
									[/not]							
								[/have_location]
							[/not]
							[not]
								[variable]
									name=unit.type
									formula="value in ['Jinn', 'Fire Guardian', 'Fire Wraith', 'Giant Mudcrawler', 'Mudcrawler']"
								[/variable]
							[/not]
							[not]
								[variable]
									name=unit.race
									formula="value in ['undead','troll','wose']"
								[/variable]
							[/not]
							[then]
								[switch]
									variable=unit.type
									[case]
										value=Cuttle Fish, Kraken, Giant Scorpion, Giant Scorpling, Giant Spider, Rock Scorpion, Sand Scamperer, Sand Scuttler, Shadow Jumping Spider
										{VARIABLE_OP blood_image rand ("blood-1.png~CS(-64,-64,64)","blood-2.png~CS(-64,-64,64)","blood-3.png~CS(-64,-64,64)","blood-4.png~CS(-64,-64,64)","blood-5.png~CS(-64,-64,64)","blood-6.png~CS(-64,-64,64)","blood-7.png~CS(-64,-64,64)","blood-8.png~CS(-64,-64,64)","blood-9.png~CS(-64,-64,64)","blood-10.png~CS(-64,-64,64)")}
										{PLACE_IMAGE $blood_image $x1 $y1}
									[/case]
									[case]
										value=Dragonfly Naiad, Dragonfly, Grand Dragonfly, Giant Ant, Giant Ant Egg, Fire Ant Egg, Fire Ant, Fire Ant Queen, Firebane Ant, Firebomb Ant, Giant Ant Queen, Soldier Ant, Horned Scarab
										{VARIABLE_OP blood_image rand ("blood-1.png~CS(64,64,-64)","blood-2.png~CS(64,64,-64)","blood-3.png~CS(64,64,-64)","blood-4.png~CS(64,64,-64)","blood-5.png~CS(64,64,-64)","blood-6.png~CS(64,64,-64)","blood-7.png~CS(64,64,-64)","blood-8.png~CS(64,64,-64)","blood-9.png~CS(64,64,-64)","blood-10.png~CS(64,64,-64)")}
										{PLACE_IMAGE $blood_image $x1 $y1}
									[/case]
									[else]
										{VARIABLE_OP blood_image rand ("blood-1.png","blood-2.png","blood-3.png","blood-4.png","blood-5.png","blood-6.png","blood-7.png","blood-8.png","blood-9.png","blood-10.png")}
										{PLACE_IMAGE $blood_image $x1 $y1}
										{PLACE_IMAGE $blood_image $x1 $y1}
									[/else]
								[/switch]
							[/then]
						[/if]
						[switch]
							variable=unit.type
							[case]
								value=Dwarvish Thunderer
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/dwarves/thunderer/thunderer-die3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/dwarves/thunderer/thunderer-die3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/dwarves/thunderer/thunderer-die3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/dwarves/thunderer/thunderer-die3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Elvish Marksman
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/elves-wood/marksman-die-5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/elves-wood/marksman-die-5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/elves-wood/marksman-die-5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/elves-wood/marksman-die-5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Goblin Impaler
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/impaler-death-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/impaler-death-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/impaler-death-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/impaler-death-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Goblin Spearman
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/goblins/spearman-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/goblins/spearman-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/goblins/spearman-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/goblins/spearman-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Wolf Rider
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/wolf-rider-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/wolf-rider-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/wolf-rider-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/goblins/wolf-rider-die-4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Knight
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "s"}
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "s"}
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/knight/knight-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Horseman
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "s"}
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "s"}
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-se-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-loyalists/horseman/horseman-ne-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Duelist
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/human-loyalists/duelist-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/human-loyalists/duelist-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/human-loyalists/duelist-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/human-loyalists/duelist-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Fencer
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/human-loyalists/fencer-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/human-loyalists/fencer-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/human-loyalists/fencer-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/human-loyalists/fencer-die5.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Grand Marshal
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/marshal-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/marshal-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/marshal-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/marshal-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Lieutenant
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/lieutenant-die-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/lieutenant-die-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/lieutenant-die-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/human-loyalists/lieutenant-die-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Spearman
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/human-loyalists/spearman-death4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/human-loyalists/spearman-death4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/human-loyalists/spearman-death4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/human-loyalists/spearman-death4.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Mage
								[if]
									[variable]
										name=unit.gender
										equals=male
									[/variable]
									[then]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage+female-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage+female-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage+female-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-magi/mage+female-die-16.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Thief
								[if]
									[variable]
										name=unit.gender
										equals=male
									[/variable]
									[then]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief+female-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief+female-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief+female-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/human-outlaws/thief+female-die-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Peasant
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/human-peasants/peasant-die9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/human-peasants/peasant-die9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/human-peasants/peasant-die9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/human-peasants/peasant-die9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Giant Rat
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/monsters/giant-rat-die-3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/monsters/giant-rat-die-3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/monsters/giant-rat-die-3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/monsters/giant-rat-die-3.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Orcish Assassin
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/orcs/assassin-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/orcs/assassin-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/orcs/assassin-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/orcs/assassin-die-10.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Orcish Grunt
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*
										[not]
											terrain=Ww*^B*
										[/not]
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "s"}
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/orcs/grunt-die-sword.png~BLIT(units/orcs/grunt-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/orcs/grunt-die-sword.png~BLIT(units/orcs/grunt-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/orcs/grunt-ne-die-sword.png~BLIT(units/orcs/grunt-ne-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/orcs/grunt-ne-die-sword.png~BLIT(units/orcs/grunt-ne-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "s"}
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/orcs/grunt-die-sword.png~BLIT(units/orcs/grunt-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/orcs/grunt-die-sword.png~BLIT(units/orcs/grunt-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/orcs/grunt-ne-die-sword.png~BLIT(units/orcs/grunt-ne-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/orcs/grunt-ne-die-sword.png~BLIT(units/orcs/grunt-ne-die-8.png~TC($unit.side,magenta))~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Troll Whelp
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/trolls/whelp-die-8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/trolls/whelp-die-8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/trolls/whelp-die-8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/trolls/whelp-die-8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Dark Adept
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/undead-necromancers/adept-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/undead-necromancers/adept-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/undead-necromancers/adept-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/undead-necromancers/adept-die8.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Deathblade
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/undead-skeletal/deathblade-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/undead-skeletal/deathblade-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/undead-skeletal/deathblade-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/undead-skeletal/deathblade-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Revenant
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/undead-skeletal/revenant/revenant-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/undead-skeletal/revenant/revenant-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/undead-skeletal/revenant/revenant-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/undead-skeletal/revenant/revenant-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Skeleton
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE_SUBMERGED "units/undead-skeletal/skeleton/skeleton-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE_SUBMERGED "units/undead-skeletal/skeleton/skeleton-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/undead-skeletal/skeleton/skeleton-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/undead-skeletal/skeleton/skeleton-dying-7.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Skeleton Archer
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/undead-skeletal/archer/archer-die-13.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/undead-skeletal/archer/archer-die-13.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/undead-skeletal/archer/archer-die-13.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/undead-skeletal/archer/archer-die-13.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Ancient Wose
								[if]
									[variable]
										name=second_weapon.type
										equals=arcane
									[/variable]
									[or]
										[variable]
											name=second_weapon.type
											equals=cold
										[/variable]
									[/or]
									[then]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/woses/wose-ancient-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
															submerge=1
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/woses/wose-ancient-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
															submerge=1
														[/multihex_image]
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														[multihex_image]
															x,y=$x1,$y1
															image="units/woses/wose-ancient-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()"
														[/multihex_image]
													[/then]
													[else]
														[multihex_image]
															x,y=$x1,$y1
															image="units/woses/wose-ancient-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()"
														[/multihex_image]
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Elder Wose
								[if]
									[variable]
										name=second_weapon.type
										equals=arcane
									[/variable]
									[or]
										[variable]
											name=second_weapon.type
											equals=cold
										[/variable]
									[/or]
									[then]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-elder-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-elder-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/woses/wose-elder-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/woses/wose-elder-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Wose
								[if]
									[variable]
										name=second_weapon.type
										equals=arcane
									[/variable]
									[or]
										[variable]
											name=second_weapon.type
											equals=cold
										[/variable]
									[/or]
									[then]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/woses/wose-die-decay-9.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											[have_location]
												x,y=$x1,$y1
												terrain=Ww*^*,S*^*,Chw^*,Chs^*,Cm*^*,Khw^*,Khs^*,Km^*
												[not]
													terrain=*^B*
												[/not]							
											[/have_location]
											[then]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE_SUBMERGED "units/woses/wose-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/then]
											[else]
												[if]
													{VARIABLE_CONDITIONAL unit.facing contains "w"}
													[then]
														{PLACE_IMAGE "units/woses/wose-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()~FL()" $x1 $y1}
													[/then]
													[else]
														{PLACE_IMAGE "units/woses/wose-die-fall-15.png~TC($unit.side,magenta)~NO_TOD_SHIFT()" $x1 $y1}
													[/else]
												[/if]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Fire Dragon
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=Ww*^*,S*^*
										[not]
											terrain=*^B*
										[/not]							
									[/have_location]
									[then]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/monsters/skeletal-dragon/skeletal-dragon.png~NO_TOD_SHIFT()~FL()"
													submerge=1
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/monsters/skeletal-dragon/skeletal-dragon.png~NO_TOD_SHIFT()"
													submerge=1
												[/multihex_image]
											[/else]
										[/if]
									[/then]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/monsters/skeletal-dragon/skeletal-dragon.png~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/monsters/skeletal-dragon/skeletal-dragon.png~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Cuttle Fish
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=W*^*,S*^*
										[not]
											terrain=W*^B*,S*^B*
										[/not]							
									[/have_location]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/monsters/cuttlefish-die-6.png~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/monsters/cuttlefish-die-6.png~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Fire Guardian, Fire Wraith
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=W*^*,S*^*
										[not]
											terrain=W*^B*,S*^B*
										[/not]							
									[/have_location]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/monsters/fireghost-death6.png~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/monsters/fireghost-death6.png~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Giant Mudcrawler
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=W*^*,S*^*
										[not]
											terrain=W*^B*,S*^B*
										[/not]							
									[/have_location]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												[multihex_image]
													x,y=$x1,$y1
													image="units/monsters/giant-mudcrawler-death7.png~NO_TOD_SHIFT()~FL()"
												[/multihex_image]
											[/then]
											[else]
												[multihex_image]
													x,y=$x1,$y1
													image="units/monsters/giant-mudcrawler-death7.png~NO_TOD_SHIFT()"
												[/multihex_image]
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
							[case]
								value=Mudcrawler
								[if]
									[have_location]
										x,y=$x1,$y1
										terrain=W*^*,S*^*
										[not]
											terrain=W*^B*,S*^B*
										[/not]							
									[/have_location]
									[else]
										[if]
											{VARIABLE_CONDITIONAL unit.facing contains "w"}
											[then]
												{PLACE_IMAGE "units/monsters/mudcrawler-die-3.png~NO_TOD_SHIFT()~FL()" $x1 $y1}
											[/then]
											[else]
												{PLACE_IMAGE "units/monsters/mudcrawler-die-3.png~NO_TOD_SHIFT()" $x1 $y1}
											[/else]
										[/if]
									[/else]
								[/if]
							[/case]
						[/switch]
					[/else]
				[/if]
			[/then]
	[/event]
[/modification]

#undef SCM_ABOUT
